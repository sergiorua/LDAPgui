addPrincipal=function(dataStore,selectedRow){Ext.apply(Ext.form.VTypes,{password:function(value,field){if(field.initialPasswordField){var pwd=Ext.getCmp(field.initialPasswordField);this.passwordText='Confirmation does not match your intial password entry.';return(value==pwd.getValue());}
passwordText:'Passwords must be at least 8 characters, containing either a number, or a valid special character (!@#$%^&*()-_=+)';var hasSpecial=value.match(/[0-9!@#\$%\^&\*\(\)\-_=\+]+/i);var hasLength=(value.length>=8);return(hasSpecial&&hasLength);},passwordText:'Passwords must be at least 8 characters, containing either a number, or a valid special character (!@#$%^&*()-_=+)',});var principal=new Ext.form.TextField({fieldLabel:'Principal',allowBlank:false,name:'principal',anchor:'90%'});var uCheck=new Ext.form.Radio({id:'radio1',boxLabel:'User',checked:false,inputValue:'user',name:'ptype',});var hCheck=new Ext.form.Radio({id:'radio2',boxLabel:'Host',checked:false,inputValue:'host',name:'ptype',});hCheck.on('check',function(f,checked){password.setDisabled(checked);password2.setDisabled(checked);});var ptype=new Ext.form.RadioGroup({fieldLabel:'Type',anchor:'90%',items:[uCheck,hCheck]});ptype.on('change',function(f,n,o){alert('Hi');});var password=new Ext.form.TextField({fieldLabel:'Password',allowBlank:false,inputType:'password',name:'password',id:'password1',vtype:'password',anchor:'90%'});var password2=new Ext.form.TextField({fieldLabel:'Re-Password',allowBlank:false,inputType:'password',name:'password2',id:'password2',vtype:'password',initialPasswordField:'password',anchor:'90%'});var formPanel=new Ext.form.FormPanel({baseCls:'x-plain',labelWidth:100,url:'/krb/add',method:'GET',defaultType:'textfield',items:[principal,ptype,password,password2,]});var window=new Ext.Window({title:'Add New Principal to Kerberos',width:400,height:230,minWidth:300,minHeight:200,layout:'fit',plain:true,bodyStyle:'padding:5px;',buttonAlign:'center',items:formPanel,buttons:[{text:'Save',handler:function(){if(formPanel.form.isValid()){formPanel.form.submit({waitMsg:'Saving...',failure:function(form,action){Ext.MessageBox.alert('Error Message',action.result.info);},success:function(form,action){Ext.MessageBox.alert('Confirm',action.result.info);window.destroy();loadGroupsGrid();}});}else{Ext.MessageBox.alert('Errors','Please fix the errors noted.');}}},{text:'Cancel',handler:function(){window.destroy();}}]});window.show();};
