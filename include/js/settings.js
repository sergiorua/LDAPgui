settings=function(){Ext.apply(Ext.form.VTypes,{password:function(value,field){if(field.initialPasswordField){var pwd=Ext.getCmp(field.initialPasswordField);this.passwordText='Confirmation does not match your intial password entry.';return(value==pwd.getValue());}
passwordText:'Please enter a valid password';return(true);},passwordText:'Please enter and confirm the password',});var server=new Ext.form.TextField({fieldLabel:'Server Name/IP',allowBlank:false,name:'server',anchor:'90%'});var admin=new Ext.form.TextField({fieldLabel:'Admin User',allowBlank:false,name:'admin',value:'cn=Directory Manager',anchor:'90%'});var password1=new Ext.form.TextField({fieldLabel:'Admin Password',allowBlank:false,name:'password1',id:'password1',inputType:'password',anchor:'90%'});var password2=new Ext.form.TextField({fieldLabel:'Confirm Password',allowBlank:false,vtype:'password',name:'password2',initialPasswordField:'password1',id:'password2',inputType:'password',anchor:'90%'});var suffix=new Ext.form.TextField({fieldLabel:'Suffix',allowBlank:false,name:'suffix',emptyText:'dc=example,dc=com',anchor:'90%'});var formPanel=new Ext.form.FormPanel({baseCls:'x-plain',labelWidth:100,url:'/settings/save',method:'GET',defaultType:'textfield',items:[server,admin,suffix]});var window=new Ext.Window({title:'LDAP GUI Settings',width:500,height:330,minWidth:300,minHeight:250,layout:'fit',plain:true,bodyStyle:'padding:5px;',buttonAlign:'center',items:formPanel,buttons:[{text:'Save',handler:function(){if(formPanel.form.isValid()){formPanel.form.submit({waitMsg:'Saving...',failure:function(form,action){Ext.MessageBox.alert('Error Message',action.result.errorInfo);},success:function(form,action){Ext.MessageBox.alert('Confirm',action.result.info);window.hide();reloadUsersGrid();}});}else{Ext.MessageBox.alert('Errors','Please fix the errors noted.');}}},{text:'Cancel',handler:function(){window.hide();}}]});window.show();};
