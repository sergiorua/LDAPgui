var server="KRB5_SERVER";var realm="KRB5_REALM";function loadPrincipalsGrid(){return(true);}
Ext.onReady(function(){Ext.QuickTips.init();Ext.form.Field.prototype.msgTarget='side';principalsStore=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:'/krb5/list',method:'GET',}),reader:new Ext.data.JsonReader({root:'results',},[{name:'principal'},{name:'type'},])});var principalsColumns=new Ext.grid.ColumnModel([new Ext.grid.RowNumberer(),{header:"Principal",width:220,sortable:true,dataIndex:'principal'},{header:"Type",width:150,sortable:true,dataIndex:'type'},]);var principalsGrid=new Ext.grid.GridPanel({store:principalsStore,deferredRender:false,cm:principalsColumns,sm:new Ext.grid.RowSelectionModel({singleSelect:true}),width:'100%',height:350,frame:true,iconCls:'icon-grid',tbar:[{text:'Add Principal',tooltip:'Add a new principal',iconCls:'add',handler:function(){addPrincipal(principalsStore,principalsGrid);return(true);},},'-',{text:'Edit Principal',tooltip:'Edit the selected principal from the list',iconCls:'edit',handler:function(x){var n=hostsGrid.getSelections().length;if(n>1){Ext.MessageBox.alert('Error','You can only edit one principal at time');}else if(n==0){Ext.MessageBox.alert('Error','Please select a principal from the list');}else{}},},'-',{text:'Remove Principal',tooltip:'Remove the principal from the list',iconCls:'remove',handler:function(x){delHost(hostsStore,hostsGrid);},},'-',{text:'Reload',tooltip:'Reload principals grid',handler:function(){loadPrincipalsGrid();},}],});var krb5Mgt=new Ext.FormPanel({bodyStyle:'padding:5px',labelWidth:175,border:false,baseCls:'x-plain',defaults:{bodyStyle:'padding:0px'},items:principalsGrid,});var window=new Ext.Window({title:'Kerberos Users Management: '+server+' - '+realm,width:750,height:450,minWidth:300,minHeight:200,plain:true,bodyStyle:'padding:5px;',buttonAlign:'center',closable:false,items:krb5Mgt,buttons:[{text:'Help',handler:function(){showHelp();},},{text:'Logout',handler:function(){document.location="/logout";},}]});window.show();});
